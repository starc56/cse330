#Task1
def compare(left, right):

    if left == '[' and right==']':
        return True
    elif left == '{' and right=='}':
        return True
    elif left == '(' and right==')':
        return True
    else:
        return False


def parenthesis_checkerArray(text):
    stack = []
    inndex = []
    i=0
    for j in text:
        i+=1
        if j in ["[","{","("]:
            stack.append(j)
            inndex.append(i)


        if j in ["]","}",")"]:

            if not stack:
                return i ,j,"not opened"
            else:
                left = stack[-1]
                left_index = inndex[-1]

            if compare(left,j):
                stack.pop()
                inndex.pop()
            else:
                return left_index,left,"not closed"
    return True

def arraybased():
    text = input("enter the stack")
    index = parenthesis_checkerArray(text)
    if index is True:
        print("This expression is correct")
    else:
        print("This expression is NOT correct.")
        print("ERROR at character #",index)


arraybased()


#Task2


class Node:
    def __init__(self, data,index):
        self.data = data
        self.index = index
        self.next = None

class Stack:
    def __init__(self):
        self.head = None
    def isempty(self):
        if self.head == None:
            return True
        else:
            return False

    def push(self, data,index):

        if self.head == None:
            self.head = Node(data,index)
        else:
            newnode = Node(data,index)
            newnode.next = self.head
            self.head = newnode

    def pop(self):
        if self.isempty():
            return None
        else:
            poped = self.head
            self.head = self.head.next
            poped.next = None
            return poped.data

    def peek(self):
        if self.isempty():
            return None
        else:
            return self.head.data , self.head.index



def parenthesis_checkerStack(text):
    linkedstack = Stack()
    i=0
    for j in text:
        i+=1
        if j in ["[","{","("]:
            linkedstack.push(j,i)

        if j in ["]","}",")"]:
            if linkedstack.isempty():
                return i ,j,"not opened"
            else:
                left , index= linkedstack.peek()
            if compare(left,j):
                linkedstack.pop()
            else:
                return index,left,"not closed"
    return True

def linkedlistbased():
    check = input("enter the stack")
    index1 = parenthesis_checkerStack(check)

    if index1==True:
        print("This expression is correct")
    else:
        print("This expression is NOT correct.")
        print("ERROR at character ",index1)




linkedlistbased()


